PREFIX lt: <http://ldbcouncil.org/types/>
PREFIX lp: <http://ldbcouncil.org/>

SELECT (COUNT(*) as ?count)
WHERE {
 ?message (lp:Comment_hasTag_Tag ) ?tag .
 ?message (lp:Comment_hasCreator_Person ) ?person .

 OPTIONAL { ?liker (lp:Person_likes_Comment ) ?message }
 OPTIONAL { ?reply (lp:Comment_replyOf_Comment ) ?message }
}
